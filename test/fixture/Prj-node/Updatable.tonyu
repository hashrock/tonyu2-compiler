native Promise;
native setTimeout;

\waitFor(f) {
    if (_thread) {
        var r=_thread.waitFor(f);
        return r;
    }
    return f;
}
\update() {
    waitFor(new Promise(\(s) {
        setTimeout(s,50);
    }));
}
